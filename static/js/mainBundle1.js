!function (t) { var e = {}; function n(o) { if (e[o]) return e[o].exports; var r = e[o] = { i: o, l: !1, exports: {} }; return t[o].call(r.exports, r, r.exports, n), r.l = !0, r.exports } n.m = t, n.c = e, n.d = function (t, e, o) { n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: o }) }, n.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, n.t = function (t, e) { if (1 & e && (t = n(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var o = Object.create(null); if (n.r(o), Object.defineProperty(o, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var r in t) n.d(o, r, function (e) { return t[e] }.bind(null, r)); return o }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(e, "a", e), e }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, n.p = "", n(n.s = 1) }([function (t, e, n) { "use strict"; t.exports = function (t) { var e = []; return e.toString = function () { return this.map((function (e) { var n = function (t, e) { var n = t[1] || "", o = t[3]; return o ? e && "function" == typeof btoa ? (t = function (t) { return t = btoa(unescape(encodeURIComponent(JSON.stringify(t)))), t = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t), "/*# ".concat(t, " */") }(o), e = o.sources.map((function (t) { return "/*# sourceURL=".concat(o.sourceRoot || "").concat(t, " */") })), [n].concat(e).concat([t]).join("\n")) : [n].join("\n") : n }(e, t); return e[2] ? "@media ".concat(e[2], " {").concat(n, "}") : n })).join("") }, e.i = function (t, n, o) { "string" == typeof t && (t = [[null, t, ""]]); var r = {}; if (o) for (var i = 0; i < this.length; i++) { var a = this[i][0]; null != a && (r[a] = !0) } for (var s = 0; s < t.length; s++) { var c = [].concat(t[s]); o && r[c[0]] || (n && (c[2] ? c[2] = "".concat(n, " and ").concat(c[2]) : c[2] = n), e.push(c)) } }, e } }, function (t, e, n) { n(2), t.exports = n(5) }, function (t, e, n) { var o = n(3), r = n(4); n = { insert: "head", singleton: !1 }; o(r = "string" == typeof (r = r.__esModule ? r.default : r) ? [[t.i, r, ""]] : r, n), t.exports = r.locals || {} }, function (t, e, n) { "use strict"; var o, r, i = (r = {}, function (t) { if (void 0 === r[t]) { var e = document.querySelector(t); if (window.HTMLIFrameElement && e instanceof window.HTMLIFrameElement) try { e = e.contentDocument.head } catch (t) { e = null } r[t] = e } return r[t] }), a = []; function s(t) { for (var e = -1, n = 0; n < a.length; n++)if (a[n].identifier === t) { e = n; break } return e } function c(t, e) { for (var n = {}, o = [], r = 0; r < t.length; r++) { var i = t[r], c = e.base ? i[0] + e.base : i[0], u = n[c] || 0, d = "".concat(c, " ").concat(u); n[c] = u + 1, u = s(d), i = { css: i[1], media: i[2], sourceMap: i[3] }, -1 !== u ? (a[u].references++, a[u].updater(i)) : a.push({ identifier: d, updater: function (t, e) { var n, o, r, i; return r = e.singleton ? (i = m++, n = p = p || l(e), o = f.bind(null, n, i, !1), f.bind(null, n, i, !0)) : (n = l(e), o = function (t, e, n) { var o = n.css, r = n.media; n = n.sourceMap; if (r ? t.setAttribute("media", r) : t.removeAttribute("media"), n && "undefined" != typeof btoa && (o += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n)))), " */")), t.styleSheet) t.styleSheet.cssText = o; else { for (; t.firstChild;)t.removeChild(t.firstChild); t.appendChild(document.createTextNode(o)) } }.bind(null, n, e), function () { !function (t) { null !== t.parentNode && t.parentNode.removeChild(t) }(n) }), o(t), function (e) { e ? e.css === t.css && e.media === t.media && e.sourceMap === t.sourceMap || o(t = e) : r() } }(i, e), references: 1 }), o.push(d) } return o } function l(t) { var e, o = document.createElement("style"), r = t.attributes || {}; if (void 0 !== r.nonce || (e = n.nc) && (r.nonce = e), Object.keys(r).forEach((function (t) { o.setAttribute(t, r[t]) })), "function" == typeof t.insert) t.insert(o); else { if (!(t = i(t.insert || "head"))) throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid."); t.appendChild(o) } return o } var u, d = (u = [], function (t, e) { return u[t] = e, u.filter(Boolean).join("\n") }); function f(t, e, n, o) { n = n ? "" : o.media ? "@media ".concat(o.media, " {").concat(o.css, "}") : o.css, t.styleSheet ? t.styleSheet.cssText = d(e, n) : (o = document.createTextNode(n), (n = t.childNodes)[e] && t.removeChild(n[e]), n.length ? t.insertBefore(o, n[e]) : t.appendChild(o)) } var p = null, m = 0; t.exports = function (t, e) { (e = e || {}).singleton || "boolean" == typeof e.singleton || (e.singleton = o = void 0 === o ? Boolean(window && document && document.all && !window.atob) : o); var n = c(t = t || [], e); return function (t) { if (t = t || [], "[object Array]" === Object.prototype.toString.call(t)) { for (var o = 0; o < n.length; o++) { var r = s(n[o]); a[r].references-- } t = c(t, e); for (var i = 0; i < n.length; i++) { var l = s(n[i]); 0 === a[l].references && (a[l].updater(), a.splice(l, 1)) } n = t } } } }, function (t, e, n) { "use strict"; n.r(e); var o = n(0); (o = n.n(o)()(!1)).push([t.i, '.plus-icon{width:40px!important;height:40px!important;color:#fff}.widget-box{padding:4px 2px 2px;background:#add8e6;border-radius:0 50px 50px 0;box-shadow:3px 3px 6px -3px #000;cursor:pointer;z-index:100000;left:0;opacity:.9;font-size:13px;box-sizing:content-box}.plus-widget-continer{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:space-between;justify-content:space-between}.annoflow-tooltip{cursor:pointer;background:#000;padding:10px;border-radius:6px;color:#fff;position:relative;left:-20px}.annoflow-tooltip:before{content:" ";position:absolute;top:50%;right:100%;margin-top:-5px;border:5px solid transparent;border-right-color:#000}.annoflow-tooltip{-webkit-animation:myfirst 2s infinite;animation:myfirst 2s infinite;-webkit-animation-direction:alternate;animation-direction:alternate}@-webkit-keyframes myfirst{0%{left:-20px}50%{left:20px}to{left:-20px}}@keyframes myfirst{0%{left:-20px}50%{left:20px}to{left:-20px}}.widget-box:hover{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both;opacity:1}-webkit-keyframes rotateIn{0%{-webkit-transform-origin:center;transform-origin:center;-webkit-transform:rotate(-3deg);transform:rotate(-3deg)}to{-webkit-transform-origin:center;transform-origin:center;-webkit-transform:none;transform:none}}@-webkit-keyframes rotateIn{0%{-webkit-transform-origin:center;transform-origin:center;-webkit-transform:rotate(-200deg);transform:rotate(-200deg)}to{-webkit-transform-origin:center;transform-origin:center;-webkit-transform:none;transform:none}}@keyframes rotateIn{0%{-webkit-transform-origin:center;transform-origin:center;-webkit-transform:rotate(-200deg);transform:rotate(-200deg)}to{-webkit-transform-origin:center;transform-origin:center;-webkit-transform:none;transform:none}}.aaaa:hover{outline:1px dashed #00f!important;cursor:crosshair!important}.comment-box{box-shadow:3px 3px 15px -3px #000;width:300px;background:#fff;padding:10px;border-radius:10px;z-index:1000000000000}.comments-container{max-height:200px}.comment-box.left{right:0;top:0;position:absolute}.comment-box.left.up,.comment-box.up{right:0;position:absolute;top:-100px}.comment-box.right.up{left:0;position:absolute;top:-100px}.comment-container{color:#000!important;border-bottom:solid;border-color:#add8e6;border-width:1px;padding:4px;margin:10px 0}.user-container{display:-webkit-flex;display:flex;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;align-items:center}.user-name{opacity:.6}.profile-image{border-radius:50%}.name-comment{margin-left:10px;font-size:14px}.dialog-box{box-shadow:3px 3px 15px -3px #000;width:300px;background:#fff;padding:10px;border-radius:10px;z-index:1000000000000;position:relative;top:20px}.dialog-box.left{right:300px}.dialog-box.left.up{right:0;position:absolute;top:-200px}.dialog-box.right.up{left:0}.dialog-box.right.up,.dialog-box.up{position:absolute;top:-200px}.comments-container{max-height:300px;overflow:auto;margin-bottom:10px}.buttons-container{display:-webkit-flex;display:flex;-webkit-justify-content:flex-end;justify-content:flex-end}.add-file-button{cursor:pointer;font-size:12px;margin-left:10px}.submit-button{margin-top:10px;display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;-webkit-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;color:#fff;background-color:#17a2b8}.submit-button[disabled]{background:#d3d3d3;color:#fff;border-width:0}.cancel-button{margin-top:10px;display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;-webkit-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;color:#000}.cacel-button:hover{color:#fff;background-color:red}.comment-textarea{color:#000;background:#fff!important;width:100%;max-width:300px;padding:8px;border-radius:5px;resize:vertical;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;box-sizing:border-box;font-size:13.3333px;font-family:Helvetica,Arial,sans-serif;border:0 solid #ced4da;resize:none}.comment-textarea:focus{color:#495057;background-color:#fff!important;border-color:#80bdff;border-width:0!important;outline:0}.buttons-box-left{-webkit-justify-content:space-between;justify-content:space-between}.buttons-box,.buttons-box-left{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center}.buttons-box{-webkit-justify-content:flex-end;justify-content:flex-end;cursor:pointer}.custom-file-input{max-width:150px;border-width:0!important;padding:0!important}.file{opacity:0;width:.1px;height:.1px;position:absolute}.file-input label{display:block;position:relative;width:200px;height:50px;border-radius:25px;background:linear-gradient(40deg,#ff6ec4,#7873f5);box-shadow:0 4px 7px rgba(0,0,0,.4);display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;color:#fff;font-weight:700;cursor:pointer;transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out;transition:transform .2s ease-out,-webkit-transform .2s ease-out}.file-name{position:absolute;bottom:-35px;left:10px;font-size:.85rem;color:#555}.file-box{max-width:150px;margin-top:10px}.App{-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-around;justify-content:space-around;font-size:16px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";position:relative}.App,.dot{display:-webkit-flex;display:flex}.dot{background-color:#add8e6;-webkit-flex-direction:column;flex-direction:column;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;color:#000;font-size:13px;width:20px;height:20px;border-radius:17px;padding:4px;box-sizing:content-box;border:2px solid #fff;box-shadow:5px 5px 15px 5px rgba(0,0,0,.59)}.dot:focus{background-color:red!important;transition:height .25s ease,width .25s ease;-webkit-transform:translate(0);transform:translate(0)}@-webkit-keyframes blinker{50%{opacity:0}}@keyframes blinker{50%{opacity:0}}.dot:focus:after,.dot:focus:before{content:"";display:block;position:absolute;top:0;right:0;bottom:0;left:0;border-radius:50%;border:1px solid red}.dot:focus:before{-webkit-animation:ripple 2s linear infinite;animation:ripple 2s linear infinite}.dot:focus:after{-webkit-animation:ripple 2s linear 1s infinite;animation:ripple 2s linear 1s infinite}@-webkit-keyframes ripple{0%{-webkit-transform:scale(1)}75%{-webkit-transform:scale(1.75);opacity:1}to{-webkit-transform:scale(2);opacity:0}}@keyframes ripple{0%{-webkit-transform:scale(1);transform:scale(1)}75%{-webkit-transform:scale(1.75);transform:scale(1.75);opacity:1}to{-webkit-transform:scale(2);transform:scale(2);opacity:0}}', ""]), e.default = o }, function (t, e) { (this["webpackJsonpdots-client"] = this["webpackJsonpdots-client"] || []).push([[0], { 31: function (t, e, n) { }, 54: function (t, e, n) { }, 55: function (t, e, n) { }, 56: function (t, e, n) { }, 57: function (t, e, n) { }, 58: function (t, e, n) { }, 59: function (t, e, n) { "use strict"; function o(t) { window.parent.postMessage(t, "*") } function r(t, e) { C[t] ? C[t].push(e) : C[t] = [e] } function i(t) { t.changeAllDotsPosition; var e = t.reset, n = Object(w.useState)(!1), i = ((t = Object(I.a)(n, 2))[0], t[1]), a = (n = Object(w.useState)(!0), n = (t = Object(I.a)(n, 2))[0], t[1]); Object(w.useEffect)((function () { r("userInfo", s) }), []); var s = function t(e) { var n, o; o = t, !C[n = "userInfo"] || -1 !== (o = (n = C[n]).indexOf(o)) && (n[o] = function () { }), i("1" === e.returnUser) }; return Object(T.jsxs)("div", { dir: "ltr", className: "plus-widget-continer", children: [Object(T.jsx)("div", { className: "widget-box", onClick: function () { o("toggle"), i(!1), setTimeout((function () { a((function (t) { return !t })) }), 1500), setTimeout((function () { e(!0) }), 1500) }, children: Object(T.jsx)(S.a, { height: "40px", width: "40px", icon: n ? E.a : E.b, className: "plus-icon" }) }), !1] }) } function a(t) { var e = t.comments; t = t.openPos; return Object(T.jsx)("div", { className: "comment-box ".concat(t), children: Object(T.jsx)("div", { className: "comments-container", children: e && e.map((function (t) { return Object(T.jsx)(P, { content: t.content, author: t.author, color: t.color, authorImageUrl: t.authorImageUrl }) })) }) }) } function s(t) { var e = t.onSubmit, n = void 0 === (c = t.comments) ? [] : c, o = t.submitCallback, r = t.onSubmitReturn, i = void 0 === (l = t.authorName) ? "Anonymous" : l, a = void 0 === (f = t.authorImageUrl) ? "" : f, s = t.onClose, c = t.openPos, l = Object(w.useState)(""), u = (f = Object(I.a)(l, 2))[0], d = f[1], f = (t = Object(w.useState)(!0), (l = Object(I.a)(t, 2))[0]), p = (t = (l[1], Object(w.useState)(!1)), t = (l = Object(I.a)(t, 2))[0], l[1]), m = (l = Object(w.useState)(""), (l = Object(I.a)(l, 2))[0]), b = l[1]; return Object(T.jsxs)("div", { className: "dialog-box ".concat(c), dir: "ltr", "data-allow": "true", children: [Object(T.jsx)("div", { className: "comments-container", children: n && n.map((function (t) { return Object(T.jsx)(P, { content: null == t ? void 0 : t.content, author: null == t ? void 0 : t.authorName, color: null == t ? void 0 : t.color, authorImageUrl: null == t ? void 0 : t.authorImageUrl }) })) }), f && !n.length ? Object(T.jsxs)(T.Fragment, { children: [Object(T.jsx)("textarea", { className: "comment-textarea", placeholder: "Add a comment...", rows: "3", onChange: function (t) { d(t.target.value) } }), Object(T.jsxs)("div", { className: "buttons-box-left", children: [t ? Object(T.jsx)(U, { setFile: function (t) { return b(t) } }) : Object(T.jsx)("div", { className: "add-file-button", "data-allow": "true", style: { marginTop: "10px" }, onClick: function () { p(!0) }, children: "Add file..." }), Object(T.jsxs)("div", { className: "buttons-box", children: [Object(T.jsx)("div", { className: "cancel-button", disabled: !u, onClick: function () { s() }, "data-allow": "true", children: "Cancel" }), Object(T.jsx)("div", { className: "submit-button", disabled: !u, onClick: function () { u && (o([{ content: u, authorName: i, authorImageUrl: a, file: m }]), e({ comment: u, authorName: i, authorImageUrl: a, file: m }, r)) }, "data-allow": "true", children: "Post" })] })] })] }) : null] }) } function c(t, e) { z !== t && (console.log("url change"), e(), z = t), setTimeout((function () { c(window.location.href, e) }), 1e3) } function l(t, e) { if (!t.target.getAttribute("data-widget") && !t.target.closest(".widget-box")) return e(t), t.target.getAttribute("data-allow") || (t.stopPropagation(), t.preventDefault()), !1; window.document.removeEventListener("click", l) } function u(t) { return A = A || function (e) { if (!e.target.getAttribute("data-widget") && !e.target.closest(".widget-box")) return t(e), e.target.getAttribute("data-allow") || (e.stopPropagation(), e.preventDefault()), !1; window.document.removeEventListener("click", l) } } function d(t) { (t = window.document.getElementById(t.id)) && (D(!0), t.scrollIntoView({ behavior: "smooth", block: "center", inline: "center" }), t.focus(), setTimeout((function () { D(!1) }), 500)) } n.r(e); var f, p, m, b = n(7), h = n(3), g = n.n(h), x = n(6), w = n(1), v = n.n(w), y = n(10), j = n.n(y), k = (e = (n(31), function (t) { t && t instanceof Function && n.e(3).then(n.bind(null, 61)).then((function (e) { var n = e.getCLS, o = e.getFID, r = e.getFCP, i = e.getLCP; e = e.getTTFB; n(t), o(t), r(t), i(t), e(t) })) }), h = n(11), n.n(h)), O = (y = (m = Object(x.a)(g.a.mark((function t(e, n) { var o; return g.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return n.url = window.location.pathname, n.assignTo = "", t.next = 4, k()({ method: "post", url: "http://localhost:4000/public/dot/" + O(), data: n }); case 4: return o = t.sent, t.abrupt("return", o.data); case 6: case "end": return t.stop() } }), t) }))), function (t, e) { return m.apply(this, arguments) }), h = (p = Object(x.a)(g.a.mark((function t(e) { var n; return g.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, k.a.get("http://localhost:4000/public/dots/" + O()); case 2: return n = t.sent, t.abrupt("return", n.data); case 4: case "end": return t.stop() } }), t) }))), function (t) { return p.apply(this, arguments) }), function () { return new URLSearchParams(window.location.search).get("id") }), N = { sendPostRequest: y, getDots: h, saveFile: (f = Object(x.a)(g.a.mark((function t(e, n, o, r) { var i; return g.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.prev = 0, t.next = 3, k.a.post("http://localhost:4000/public/upload/" + n + "/" + o + "/" + r, e); case 3: return i = t.sent, console.log(i.statusText), t.abrupt("return", i.data.url); case 8: t.prev = 8, t.t0 = t.catch(0), console.log("err"); case 12: case "end": return t.stop() } }), t, null, [[0, 8]]) }))), function (t, e, n, o) { return f.apply(this, arguments) }) }, I = n(4), S = n(14), E = n(9), L = [], C = {}, T = n(0), M = (n(54), n(25)), P = (n(55), function (t) { var e = t.content, n = t.author; t.color, t = t.authorImageUrl; return Object(T.jsx)("div", { className: "comment-container", children: Object(T.jsxs)("div", { className: "user-container", children: [Object(T.jsx)(M.a, { src: t || "https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png", className: "profile-image", width: "36px", height: "36px" }), Object(T.jsxs)("div", { className: "name-comment", children: [Object(T.jsx)("div", { className: "user-name", children: n }), Object(T.jsxs)("div", { className: "comment-text", children: [" ", e] })] })] }) }) }), U = (n(56), n(57), function (t) { t.onUrlSet, t.dotId; var e = t.setFile; return Object(T.jsx)("div", { className: "file-box", children: Object(T.jsx)("input", { type: "file", name: "file", onChange: function (t) { console.log(t.target.files[0]), e(t.target.files[0]) }, "data-allow": "true", className: "custom-file-input" }) }) }), z = "", A = !1, B = l, D = function () { }; function H(t) { "http://localhost:3000" === t.origin && "redirect" === t.data.type && t.data.url && window.location.pathname !== t.data.url && (window.location.pathname = t.data.url) } function R(t) { for (var e = t, n = 0, o = 0; null !== e;)o += Q(e), n += Z(e), e = e.offsetParent || e.parentNode; return { left: o, top: n } } function F(t) { return t && void 0 !== t.offsetWidth ? t.offsetWidth : 0 } function _(t) { return t && void 0 !== t.offsetHeight ? t.offsetHeight : 0 } function W(t) { if (!t.data.active) return window.removeEventListener("click", ot, !0), nt(), et(!1), void o({ type: "iframe-state" }); tt(), et(!0), o({ type: "iframe-state" }), console.log("bind"), window.addEventListener("click", ot, !0) } function Y(t) { dt = t } function X(t) { ft() } function J() { rt = !0 } function q(t, e, n) { var o = ""; return t + 300 > n.scrollWidth ? o += " left" : t - 300 < 0 && (o += " right"), e - 300 < 0 ? o += " down" : e + 300 > n.scrollHeight && (o += " up"), o } function V(t) { var e, n, r, i, a, c, l; rt && (e = t.pageX, n = t.pageY, r = function (t) { for (var e = t.path || t.composedPath && t.composedPath(), n = ((i = e[0]).offsetLeft, i.offsetTop, i.offsetHeight), o = i.offsetWidth, r = (t = (i.className, i.id), (i = function () { for (var t, n = e[0], o = 0, r = 0; null !== n;)r += (t = n) && void 0 !== t.offsetLeft ? t.offsetLeft : 0, o += (t = n) && void 0 !== t.offsetTop ? t.offsetTop : 0, n = n.offsetParent || n.parentNode; return { left: r, top: o } }()).left), i = i.top, a = 1; a < e.length;)n = n || e[a].offsetHeight, o = o || e[a].offsetWidth, a++; return { offsetLeft: r, offsetTop: i, offsetHeight: n, offsetWidth: o, className: "", elementId: t } }(t), i = document.getElementsByTagName("body")[0], (a = document.createElement("DIV")).style.position = "absolute", a.style.left = e - 10 + "px", a.style.top = n - 10 + "px", a.classList = ["root-dot"], a.style.zIndex = 1e5, i.appendChild(a), rt = !1, l = Object(x.a)(g.a.mark((function a(s, c) { var l; return g.a.wrap((function (a) { for (; ;)switch (a.prev = a.next) { case 0: return rt = !0, a.next = 3, N.sendPostRequest("", Object(b.a)(Object(b.a)(Object(b.a)({ posX: e - 10 + "px", posY: n - 10 + "px" }, r), s), {}, { author: s.authorName, email: ct, path: function (t) { for (var e = t.target, n = ""; e.parentNode;) { for (var o = e.parentNode, r = o.children, i = 0; i < r.length; i++)if (r[i] === e) { n += e.nodeName + "[" + i + "]/"; break } e = o } return n }(t), screenHeight: i.offsetHeight, screenWidth: i.offsetWidth })); case 3: l = a.sent, c(Object(b.a)(Object(b.a)({}, l), {}, { file: s.file })), st.push(l), o("pull"); case 7: case "end": return a.stop() } }), a) }))), c = function (t, e) { return l.apply(this, arguments) }, j.a.render(Object(T.jsx)(v.a.StrictMode, { children: Object(T.jsx)($, { setShouldRender: bt, disableClickEvent: ht, posX: e + "px", posY: n + "px", showBoxInit: !0, stickyDotInit: !1, onClose: J, dotNumber: st.length + 1, children: Object(T.jsx)(s, { disableClickEvent: ht, onSubmit: c, dotId: "", authorName: it, authorImageUrl: at, openPos: q(e, n, i) }) }) }), a)) } setTimeout((function () { o({ type: "iframe-ready" }) }), 1e3); var G, K, Q = function (t) { return t && void 0 !== t.offsetLeft ? t.offsetLeft : 0 }, Z = function (t) { return t && void 0 !== t.offsetTop ? t.offsetTop : 0 }, $ = (n(58), function (t) { function e() { f(!1) } var n = t.showBoxInit, r = t.dotId, i = (t.url, t.stickyDotInit), a = t.children, s = t.onClose, c = t.comments, l = t.hideOnMouseLeave, u = (t.status, t.dotNumber), d = Object(w.useState)(n), f = (n = (t = Object(I.a)(d, 2))[0], t[1]), p = (d = Object(w.useState)(i), i = (t = Object(I.a)(d, 2))[0], t[1]), m = (d = Object(w.useState)(""), (t = Object(I.a)(d, 2))[0]), b = t[1], h = (d = Object(w.useState)(!1), (t = Object(I.a)(d, 2))[0]), g = t[1], x = (d = Object(w.useState)(c), c = (t = Object(I.a)(d, 2))[0], t[1]), y = (d = Object(w.useState)(""), d = (t = Object(I.a)(d, 2))[0], t[1]); t = Object(w.useRef)(null), c = v.a.cloneElement(a, { submitCallback: function (t) { x(t), p(!0), f(!1), g(!0) }, onSubmitReturn: function (t) { var e, n; null != t && t.file && ((e = new FormData).append("file", t.file), n = t.comments[t.comments.length - 1], N.saveFile(e, t.projectId, t._id, n._id)), b(t._id) }, onClose: function () { s(), e(), p(!1) }, comments: c }); return Object(T.jsxs)("div", { className: "App", ref: t, onMouseLeave: function (t) { (l || h) && (e(), t.target.closest(".root-dot").style.zIndex = 1e5) }, tabindex: "0", dir: "ltr", onFocus: function () { y("focus") }, children: [i ? Object(T.jsx)("div", { className: "dot " + d, onMouseOver: function (t) { return t = t, o({ id: r }), t.target.closest(".root-dot").style.zIndex = 2e5, void f(!0) }, tabindex: "0", id: "".concat(r || m), onClick: function (t) { o({ type: "openDot", id: r || m }) }, children: u }) : null, n ? c : null] }) }), tt = function () { for (var t = window.document.getElementsByTagName("iframe"), e = 0; e < t.length; e++)t[e].style.pointerEvents = "none" }, et = function (t) { window.document.getElementsByTagName("body")[0].style.cursor = t ? "crosshair" : "default" }, nt = function () { for (var t = window.document.getElementsByTagName("iframe"), e = 0; e < t.length; e++)t[e].style.pointerEvents = "all" }, ot = function (t) { t.isTrusted && u()(t) }, rt = !0, it = "Anonymous", at = "", st = [], ct = "", lt = "active", ut = null, dt = !1, ft = (K = Object(x.a)(g.a.mark((function t(e) { var n, o, r; return g.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: for (o = window.document.getElementsByClassName("root-dot"); 0 < o.length;)(r = o[0]).remove ? r.remove() : r.parentNode.removeChild(r); if (!e) { t.next = 6; break } n = st, t.next = 10; break; case 6: return t.next = 8, N.getDots(); case 8: n = t.sent, st = n; case 10: pt(n); case 11: case "end": return t.stop() } }), t) }))), function (t) { return K.apply(this, arguments) }), pt = (h = (G = Object(x.a)(g.a.mark((function t() { return g.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: r("userInfo", xt), r("reset", X), window.document.addEventListener("DOMContentLoaded", Object(x.a)(g.a.mark((function t() { var e; return g.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return D = Y, r("on-dot", d), window.addEventListener("message", H, !1), z = window.location.href, c(window.location.href, ft), W({ data: { active: !0 } }), r("comment-mode-toggle", W), a = n = void 0, n = document.getElementsByTagName("body")[0], (a = document.createElement("DIV")).style.position = "fixed", a.style.zIndex = 1e5, a.style.left = 0, a.style.top = "50%", a.style.transform = "translateY(-50%)", n.appendChild(a), j.a.render(Object(T.jsx)(v.a.StrictMode, { children: Object(T.jsx)(i, { createADot: V, reset: ft, returnUser: ut }) }), a), t.next = 7, N.getDots(); case 7: e = t.sent, st = e, o({ type: "reset-state" }), o({ type: "client-ready" }); case 11: case "end": return t.stop() }var n, a }), t) })))); case 3: case "end": return t.stop() } }), t) }))), function () { return G.apply(this, arguments) }), function (t) { rt = !0; for (var e = 0; e < t.length; e++) { var n = t[e]; mt(n) } }), mt = function (t) { var e, n, r, i, s, c, l, u, d, f; t.url === window.location.pathname && (e = t.posX, n = t.posY, r = t.comments, i = t._id, s = t.url, c = t.status, l = t.dotNumber, u = document.getElementsByTagName("body")[0], (d = document.createElement("div")).style.position = "absolute", d.style.zIndex = 1e5, (f = function (t) { try { var e = t.path, n = 0, o = 0, r = 0, i = 0; if (!e) return; for (var a = e.split("/").reverse(), s = document.getElementsByTagName("body")[0], c = (f = 0, (d = a).map((function (t, e) { "BODY" === t.split("[")[0] && (f = e) })), d.splice(f + 1)), l = 0; l < c.length; l++)s = s.children[(u = c[l]).substring(u.lastIndexOf("[") + 1, u.lastIndexOf("]"))], n += Q(s), o = F(s) ? F(s) : o, i = _(s) ? _(s) : i, r += Z(s); return { currentNode: s, offsetLeft: n, offsetWidth: o, offsetTop: r, offsetHeight: i } } catch (t) { return !1 } var u, d, f }(t)) || o({ id: i, type: "unSurePos" }), d.style.left = f ? function (t, e) { try { var n = R(e.currentNode), o = (Number(t.posX.split("p")[0]) - t.offsetLeft) / t.offsetWidth, r = e.currentNode.offsetWidth || e.offsetWidth; return n.left + r * o + "px" } catch (e) { return Number(t.posX.split("p")[0]) } }(t, f) : e, d.style.top = f ? function (t, e) { try { var n = R(e.currentNode), o = (Number(t.posY.split("p")[0]) - t.offsetTop) / t.offsetHeight, r = e.currentNode.offsetHeight || e.offsetHeight; return n.top + r * o + "px" } catch (e) { return Number(t.posY.split("p")[0]) } }(t, f) : n, d.classList = ["root-dot", "dot-" + l].join(" "), u.appendChild(d), j.a.render(Object(T.jsx)(v.a.StrictMode, { children: Object(T.jsx)($, { setShouldRender: bt, disableClickEvent: ht, posX: e, posY: n, showBoxInit: !1, stickyDotInit: "resolved" !== c && "resolved" !== lt || lt === c, comments: r, dotId: i, url: s, onClose: J, status: c, hideOnMouseLeave: !0, dotNumber: l, children: Object(T.jsx)(a, { comments: r, openPos: q(Number(t.posX.split("p")[0]), Number(t.posY.split("p")[0]), u) }) }) }), d)) }, bt = function (t) { rt = t }; e(); var ht = function () { window.document.removeEventListener("click", gt) }, gt = function (t) { B(t, V) }, xt = function (t) { it = t.name, at = t.authorImageUrl, ct = t.email, ut = t.returnUser }; function wt() { ft(!0) } u(V), h(), e(); var vt = !(window.onscroll = function () { yt(wt, 500) }), yt = function (t, e) { vt || !rt || dt || (vt = !0, setTimeout((function () { t(), vt = !1 }), e)) }; function jt(t) { !rt || t.target.classList.contains("App") || t.target.classList.contains("dot") || t.target.classList.contains("plus-icon") || t.target.closest(".comment-box") || t.target.closest(".dialog-box") || (kt && kt.classList.remove("aaaa"), kt = t.target, t.target.classList.add("aaaa"), t.target.parentNode.classList.remove("aaaa")) } window.addEventListener("message", (function (t) { "http://localhost:3000" === t.origin && (L = "on-dot" === t.data.type ? L.filter((function (t) { return "on-dot" !== t.type })) : L).push({ type: t.data.type, data: t.data }) }), !1), setInterval((function () { L.forEach((function (t) { var e = t.type, n = t.data; (C[e] || []).forEach((function (t) { t(n) })) })), L = [] }), 700), r("status-change", (function (t) { t && t.status && (lt = t.status) })), r("reset-from-store", wt); var kt, Ot = window.document.getElementsByTagName("body")[0]; r("comment-mode-toggle", (function (t) { t = t.data, kt && kt.classList.remove("aaaa"), t.active ? (console.log("active"), Ot.addEventListener("mouseover", jt)) : (console.log("unactive"), Ot.removeEventListener("mouseover", jt)) })), Ot.addEventListener("mouseover", jt) } }, [[59, 1, 2]]]) }]);