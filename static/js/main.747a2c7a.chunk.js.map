{"version":3,"sources":["requestService.js","services/communicationServices.js","components/Comment/Comment.js","components/CommentDialog/CommentDialog.js","App.js","reportWebVitals.js","components/Widget/Widget.js","components/Widget/Activities.js","components/DotsList/DotsList.js","components/Comments/Comments.js","components/Dot/Dot.js","index.js"],"names":["sendPostRequest","url","data","a","window","location","href","console","log","axios","method","process","getProjectId","res","getDots","get","URLSearchParams","search","callback","addEventListener","parent","postMessage","imageUrlHash","Amir","Ohad","Comment","content","author","color","className","Image","src","roundedCircle","width","height","CommentDialog","onSubmit","comments","submitCallback","onSubmitReturn","useState","comment","setComment","setAuthor","showForm","setShowForm","map","item","length","Form","Group","Label","Control","type","placeholder","onChange","e","target","value","as","rows","Button","variant","disabled","onClick","data-allow","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Widget","createADot","handler","active","setActive","style","background","removeEventListener","data-widget","icon","faPlus","Activities","changeAllDotsPosition","isOpen","setIsOpen","CommunicationServices","faTasks","DotList","dots","Comments","Dot","showBoxInit","dotId","stickyDotInit","children","onClose","showBox","setShowBox","stickyDot","setStickyDot","_dotId","_setDotId","commentsArr","setCommentsArr","dotStateClass","setDotStateClass","refContainer","useRef","updateClosestNode","closest","zIndex","closeBox","elementWithClassName","React","cloneElement","_id","ref","onMouseLeave","tabindex","onFocus","onMouseOver","id","onMouseOverHandler","shouldRender","changePixelsNumberX","changePixelsNumberY","dotsArr","document","getElementsByClassName","i","element","left","Number","split","top","ev","pageX","pageY","body","getElementsByTagName","div","createElement","position","classList","appendChild","callBack","apiService","posX","posY","returnData","ReactDOM","render","StrictMode","setShouldRender","disableClickEvent","init","right","div2","div1","DotsList","dot","renderDots","dotData","should","getAttribute","stopPropagation","preventDefault","setTimeout","evt","origin","el","getElementById","scrollIntoView","behavior","block","inline","focus"],"mappings":"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","file":"static/js/main.747a2c7a.chunk.js","sourcesContent":["import axios from \"axios\";\nconst sendPostRequest = async (url, data) => {\n  data.url = window.location.href;\n  console.log(data);\n  let res = await axios({\n    method: \"post\",\n    url: process.env.REACT_APP_API_URL + \"dot/\" + getProjectId(),\n    data,\n  });\n  return res.data;\n};\n\nconst getDots = async (url) => {\n  const res = await axios.get(\n    process.env.REACT_APP_API_URL + \"dots/\" + getProjectId()\n  );\n  return res.data;\n};\n\nconst getProjectId = () => {\n  const urlParams = new URLSearchParams(window.location.search);\n  const projectId = urlParams.get(\"id\");\n  return projectId;\n};\n\nexport default { sendPostRequest, getDots };\n","const subscribe = (callback) => {\n  window.addEventListener(\"message\", callback, false);\n};\n\nconst unSubscribe = (callback) => {\n  window.removeEventListener(\"message\", callback);\n};\n\nconst sendData = (data) => {\n  window.parent.postMessage(data, \"*\");\n};\n\n// const init = () => {\n//   window.addEventListener(\"load\", () => {\n//     const iframe = document.getElementsByClassName(\"iframe-cont\")[0];\n//     window.amirIframeContentWindow = iframe.contentWindow;\n//   });\n// };\n\nexport default { subscribe, unSubscribe, sendData };\n","import Image from \"react-bootstrap/Image\";\nimport \"./Comment.css\";\n\nconst imageUrlHash = {\n  Amir:\n    \"https://www.nj.com/resizer/h8MrN0-Nw5dB5FOmMVGMmfVKFJo=/450x0/smart/cloudfront-us-east-1.images.arcpublishing.com/advancelocal/SJGKVE5UNVESVCW7BBOHKQCZVE.jpg\",\n  Ohad: \"https://upload.wikimedia.org/wikipedia/commons/a/a0/Arh-avatar.jpg\",\n};\n\nconst Comment = ({ content, author, color }) => {\n  return (\n    <div className=\"comment-container\">\n      <div className=\"user-container\">\n        <Image\n          src={\n            imageUrlHash[author] ||\n            \"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png\"\n          }\n          roundedCircle\n          width=\"36px\"\n          height=\"36px\"\n        />\n        <span className=\"user-name\">{author}</span>\n      </div>\n\n      <div className=\"comment-text\"> {content}</div>\n    </div>\n  );\n};\n\nexport default Comment;\n","import Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport React, { useState, useEffect } from \"react\";\nimport Comment from \"../Comment/Comment\";\nimport \"./CommentDialog.css\";\n\nconst CommentDialog = ({\n  onSubmit,\n  comments = [],\n  submitCallback,\n  onSubmitReturn,\n}) => {\n  const [comment, setComment] = useState(\"\");\n  const [author, setAuthor] = useState(\"\");\n  const [showForm, setShowForm] = useState(true);\n  const onSubmitClick = () => {\n    submitCallback([{ content: comment, author }]);\n    onSubmit({ comment, author }, onSubmitReturn);\n  };\n  return (\n    <div className=\"dialog-box\">\n      <div className=\"comments-container\">\n        {comments &&\n          comments.map((item) => {\n            return (\n              <Comment\n                content={item?.content}\n                author={item?.author}\n                color={item?.color}\n              />\n            );\n          })}\n      </div>\n      {showForm && !comments.length ? (\n        <Form>\n          <Form.Group>\n            <Form.Label>Name</Form.Label>\n            <Form.Control\n              type=\"text\"\n              placeholder=\"Name\"\n              onChange={(e) => setAuthor(e.target.value)}\n            />\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>comment</Form.Label>\n            <Form.Control\n              as=\"textarea\"\n              rows={6}\n              onChange={(e) => {\n                setComment(e.target.value);\n              }}\n            />\n          </Form.Group>\n          <div className=\"buttons-container\">\n            <Button\n              variant=\"outline-info\"\n              disabled={!comment || !author}\n              onClick={() => onSubmitClick()}\n              data-allow=\"true\"\n            >\n              Submit\n            </Button>\n          </div>\n        </Form>\n      ) : (\n        <Button\n          variant=\"outline-info\"\n          data-allow=\"true\"\n          onClick={() => setShowForm(true)}\n        >\n          Add Commoent\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default CommentDialog;\n","import \"./App.css\";\nimport { useState, useEffect, useRef } from \"react\";\nimport apiService from \"./requestService\";\nimport CommunicationServices from \"./services/communicationServices\";\nimport UrlChangeListener from \"./services/urlChangeListener\";\n\nimport CommentDialog from \"./components/CommentDialog/CommentDialog.js\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nfunction App({\n  disableClickEvent,\n  setShouldRender,\n  posX,\n  posY,\n  showBoxInit,\n  stickyDotInit,\n  comments = [],\n  dotId,\n  url,\n}) {\n  const [showBox, setShowBox] = useState(showBoxInit);\n  const [stickyDot, setStickyDot] = useState(stickyDotInit);\n  const [commentsArr, setCommentsArr] = useState(comments);\n  const [shouldDisplyInThisPage, setDisplay] = useState(false);\n  const [_dotId, _setDotId] = useState(\"\");\n  const [dotStateClass, setDotStateClass] = useState(\"\");\n\n  const refContainer = useRef(null);\n\n  useEffect(() => {\n    if (showBox) {\n      setShouldRender(false);\n      window.addEventListener(\"click\", onClick);\n    }\n  }, [showBox]);\n\n  useEffect(() => {\n    UrlChangeListener.init(show);\n  }, []);\n\n  const onClick = (e) => {\n    if (\n      refContainer.current.contains(e.target) ||\n      e.target.getAttribute(\"data-allow\")\n    ) {\n      return;\n    }\n\n    window.removeEventListener(\"click\", onClick);\n    setShowBox(false);\n    setShouldRender(true);\n  };\n\n  const addComment = (data) => {\n    setCommentsArr((commentsArr) => [\n      ...commentsArr,\n      { content: data.comment, author: data.author },\n    ]);\n  };\n\n  const onSubmit = async (data) => {\n    addComment(data);\n    setStickyDot(true);\n    setShowBox(false);\n\n    let resData = await apiService.sendPostRequest(\"\", {\n      posX,\n      posY,\n      ...data,\n      dotId,\n      _id: _dotId,\n    });\n    _setDotId(resData._id);\n  };\n\n  const onMouseOverHandler = (e) => {\n    CommunicationServices.sendData({ id: dotId });\n    updateClosestNode(e);\n    setShowBox(true);\n  };\n\n  const updateClosestNode = (e) => {\n    const appElemnet = e.target.closest(\".root-dot\");\n    appElemnet.style.zIndex = 20000;\n  };\n\n  const onMouseOverLeave = (e) => {\n    closeBox();\n  };\n\n  const closeBox = () => {\n    setShowBox(false);\n    setShouldRender(true);\n  };\n\n  const show = () => {\n    const needToDisplay = !url || url === window.location.href;\n    setDisplay(needToDisplay);\n  };\n\n  return (\n    <div\n      className=\"App\"\n      ref={refContainer}\n      onMouseLeave={(e) => onMouseOverLeave(e)}\n      tabindex=\"0\"\n      onFocus={() => {\n        setDotStateClass(\"focus\");\n      }}\n    >\n      {shouldDisplyInThisPage && (\n        <div className=\"dailog-continer\">\n          <div>\n            {stickyDot ? (\n              <div\n                className={\"dot \" + dotStateClass}\n                onMouseOver={(e) => onMouseOverHandler(e)}\n                tabindex=\"0\"\n                id={dotId}\n              />\n            ) : null}\n            {showBox ? (\n              <CommentDialog\n                disableClickEvent={disableClickEvent}\n                onSubmit={onSubmit}\n                comments={commentsArr}\n                dotId={dotId}\n              />\n            ) : null}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { useState } from \"react\";\n\nconst Widget = ({ createADot, handler }) => {\n  const [active, setActive] = useState(false);\n  const disabledUserEvent = () => {\n    if (active) {\n      window.removeEventListener(\"click\", handler, true);\n      console.log(\"unbind\");\n\n      setActive(false);\n      return;\n    }\n\n    setActive(true);\n    console.log(\"bind\");\n    window.addEventListener(\"click\", handler, true);\n  };\n\n  return (\n    <div\n      className=\"widget-box\"\n      style={active ? { background: \"black\" } : {}}\n      onClick={disabledUserEvent}\n      data-widget={active}\n    >\n      <FontAwesomeIcon\n        height=\"40px\"\n        width=\"40px\"\n        icon={faPlus}\n        className=\"plus-icon\"\n        data-widget={active}\n      />\n    </div>\n  );\n};\n\nexport default Widget;\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTasks } from \"@fortawesome/free-solid-svg-icons\";\nimport { useState } from \"react\";\nimport CommunicationServices from \"../../services/communicationServices\";\nconst Activities = ({ createADot, handler, changeAllDotsPosition }) => {\n  const [isOpen, setIsOpen] = useState(\"false\");\n  const openMenu = () => {\n    // window.parent.postMessage(\"toggle\", \"*\");\n    CommunicationServices.sendData(\"toggle\");\n    if (isOpen) {\n      changeAllDotsPosition(-200, -20);\n    } else {\n      changeAllDotsPosition(200, 20);\n    }\n    setIsOpen((isOpen) => !isOpen);\n  };\n\n  return (\n    <div className=\"widget-box\" onClick={openMenu}>\n      <FontAwesomeIcon\n        height=\"40px\"\n        width=\"40px\"\n        icon={faTasks}\n        className=\"plus-icon\"\n      />\n    </div>\n  );\n};\n\nexport default Activities;\n","// import \"./DotList.css\";\n// import Comment from \"../Comment/Comment\";\nconst DotList = ({ dots }) => {\n  console.log(\"DotList\", dots);\n  return (\n    <div>\n      {dots.map((item) => {\n        return <h1>{item.content}</h1>;\n      })}\n    </div>\n  );\n};\n\nexport default DotList;\n","import React from \"react\";\nimport \"./Comments.css\";\nimport Comment from \"../Comment/Comment.js\";\n\nconst Comments = ({ comments }) => {\n  return (\n    <div className=\"dialog-box\">\n      <div className=\"comments-container\">\n        {comments &&\n          comments.map((item) => {\n            return (\n              <Comment\n                content={item.content}\n                author={item.author}\n                color={item.color}\n              />\n            );\n          })}\n      </div>\n    </div>\n  );\n};\n\nexport default Comments;\n","import \"./Dot.css\";\nimport React from \"react\";\nimport { useState, useEffect, useRef } from \"react\";\n// import apiService from \"./requestService\";\nimport CommunicationServices from \"../../services/communicationServices\";\n// import UrlChangeListener from \"./services/urlChangeListener\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nconst Dot = ({\n  showBoxInit,\n  dotId,\n  url,\n  stickyDotInit,\n  children,\n  onClose,\n  comments,\n}) => {\n  const [showBox, setShowBox] = useState(showBoxInit);\n  const [stickyDot, setStickyDot] = useState(stickyDotInit);\n  const [_dotId, _setDotId] = useState(\"\");\n\n  const [commentsArr, setCommentsArr] = useState(comments);\n  const [dotStateClass, setDotStateClass] = useState(\"\");\n\n  const refContainer = useRef(null);\n  console.log(\"comments\", comments);\n  const onMouseOverHandler = (e) => {\n    CommunicationServices.sendData({ id: dotId });\n    updateClosestNode(e);\n    setShowBox(true);\n  };\n  const updateClosestNode = (e) => {\n    const appElemnet = e.target.closest(\".root-dot\");\n    appElemnet.style.zIndex = 20000;\n  };\n\n  const onMouseOverLeave = (e) => {\n    onClose();\n    closeBox();\n  };\n\n  const closeBox = () => {\n    setShowBox(false);\n  };\n  let elementWithClassName = React.cloneElement(children, {\n    submitCallback: (data) => {\n      setCommentsArr(data);\n      setStickyDot(true);\n      setShowBox(false);\n    },\n    onSubmitReturn: (data) => {\n      _setDotId(data._id);\n    },\n    comments: commentsArr,\n  });\n  return (\n    <div\n      className=\"App\"\n      ref={refContainer}\n      onMouseLeave={(e) => onMouseOverLeave(e)}\n      tabindex=\"0\"\n      onFocus={() => {\n        setDotStateClass(\"focus\");\n      }}\n    >\n      {stickyDot ? (\n        <div\n          className={\"dot \" + dotStateClass}\n          onMouseOver={(e) => onMouseOverHandler(e)}\n          tabindex=\"0\"\n          id={dotId || _dotId}\n        />\n      ) : null}\n\n      {showBox ? elementWithClassName : null}\n    </div>\n  );\n};\n\nexport default Dot;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport apiService from \"./requestService\";\nimport Widget from \"./components/Widget/Widget\";\nimport Activities from \"./components/Widget/Activities\";\nimport DotsList from \"./components/DotsList/DotsList\";\nimport Comments from \"./components/Comments/Comments\";\nimport CommentDialog from \"./components/CommentDialog/CommentDialog\";\n\nimport Dot from \"./components/Dot/Dot\";\n\nimport CommunicationServices from \"./services/communicationServices\";\nlet shouldRender = true;\n\nconst changeAllDotsPosition = (\n  changePixelsNumberX,\n  changePixelsNumberY = -20\n) => {\n  let dotsArr = window.document.getElementsByClassName(\"root-dot\");\n  for (let i = 0; i < dotsArr.length; i++) {\n    const element = dotsArr[i];\n    element.style.left =\n      Number(element.style.left.split(\"p\")[0]) + changePixelsNumberX + \"px\";\n    element.style.top =\n      Number(element.style.top.split(\"p\")[0]) + changePixelsNumberY + \"px\";\n  }\n};\nconst onClose = () => {\n  shouldRender = true;\n};\nconst createADot = (ev) => {\n  if (!shouldRender) {\n    return;\n  }\n\n  const { pageX, pageY } = ev;\n  const body = document.getElementsByTagName(\"body\")[0];\n  const div = document.createElement(\"DIV\");\n  div.style.position = \"absolute\";\n  div.style.left = pageX + \"px\";\n  div.style.top = pageY + \"px\";\n  div.classList = [\"root-dot\"];\n  div.style.zIndex = 100000;\n  body.appendChild(div);\n  shouldRender = false;\n\n  const onSubmit = async (data, callBack) => {\n    shouldRender = true;\n\n    let returnData = await apiService.sendPostRequest(\"\", {\n      posX: pageX + \"px\",\n      posY: pageY + \"px\",\n      ...data,\n    });\n    callBack(returnData);\n    CommunicationServices.sendData(\"pull\");\n  };\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <Dot\n        setShouldRender={setShouldRender}\n        disableClickEvent={disableClickEvent}\n        addEventListener={addEventListener}\n        posX={pageX + \"px\"}\n        posY={pageY + \"px\"}\n        showBoxInit={true}\n        stickyDotInit={false}\n        onClose={onClose}\n      >\n        <CommentDialog\n          disableClickEvent={disableClickEvent}\n          onSubmit={onSubmit}\n          dotId={\"\"}\n        />\n      </Dot>\n    </React.StrictMode>,\n    div\n  );\n};\n\nconst init = async () => {\n  const body = document.getElementsByTagName(\"body\")[0];\n  const div = document.createElement(\"DIV\");\n  div.style.position = \"fixed\";\n  div.style.zIndex = 100000;\n  div.style.right = 0;\n  div.style.top = \"50px\";\n  body.appendChild(div);\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <Widget createADot={createADot} handler={handler} />\n    </React.StrictMode>,\n    div\n  );\n\n  const div2 = document.createElement(\"DIV\");\n  div2.style.position = \"fixed\";\n  div2.style.zIndex = 100000;\n  div2.style.right = 0;\n  div2.style.top = \"150px\";\n  body.appendChild(div2);\n  ReactDOM.render(\n    <React.StrictMode>\n      <Activities\n        createADot={createADot}\n        handler={handler}\n        changeAllDotsPosition={changeAllDotsPosition}\n      />\n    </React.StrictMode>,\n    div2\n  );\n\n  const div1 = document.createElement(\"DIV\");\n  div1.style.position = \"fixed\";\n  div1.style.zIndex = 100000;\n  div1.style.right = 0;\n  div1.style.top = \"50px\";\n\n  let dots = await apiService.getDots();\n  ReactDOM.render(\n    <React.StrictMode>\n      <DotsList dots={dots} />\n    </React.StrictMode>,\n    div1\n  );\n  for (let i = 0; i < dots.length; i++) {\n    const dot = dots[i];\n    renderDots(dot);\n  }\n};\nconst renderDots = (dotData) => {\n  const { posX, posY, comments, _id, url } = dotData;\n  const body = document.getElementsByTagName(\"body\")[0];\n  const div = document.createElement(\"DIV\");\n  div.style.position = \"absolute\";\n  div.style.zIndex = 100000;\n  div.style.left = posX;\n  div.style.top = posY;\n  div.classList = [\"root-dot\"];\n  body.appendChild(div);\n\n  ReactDOM.render(\n    <React.StrictMode>\n      {\n        <Dot\n          setShouldRender={setShouldRender}\n          disableClickEvent={disableClickEvent}\n          addEventListener={addEventListener}\n          posX={posX}\n          posY={posY}\n          showBoxInit={false}\n          stickyDotInit={true}\n          comments={comments}\n          dotId={_id}\n          url={url}\n          onClose={onClose}\n        >\n          <Comments comments={comments} />\n        </Dot>\n      }\n    </React.StrictMode>,\n    div\n  );\n};\n\nconst setShouldRender = (should) => {\n  shouldRender = should;\n};\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\nconst disableClickEvent = () => {\n  window.document.removeEventListener(\"click\", handler);\n};\nconst handler = (e) => {\n  if (e.target.getAttribute(\"data-widget\")) {\n    window.document.removeEventListener(\"click\", handler);\n    return;\n  }\n  createADot(e);\n  if (!e.target.getAttribute(\"data-allow\")) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n  return false;\n};\n\nconst addEventListener = () => {\n  setTimeout(() => window.document.addEventListener(\"click\", createADot), 200);\n};\n\ninit();\n\nconst receiveMessage = (evt) => {\n  if (evt.origin === \"http://localhost:3000\") {\n    let el = window.document.getElementById(evt.data);\n    debugger;\n    el.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"center\",\n      inline: \"center\",\n    });\n    el.focus();\n  }\n};\n\nCommunicationServices.subscribe(receiveMessage);\n"],"sourceRoot":""}