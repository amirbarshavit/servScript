(this["webpackJsonpdots-client"]=this["webpackJsonpdots-client"]||[]).push([[0],{42:function(t,e,n){},43:function(t,e,n){},61:function(t,e,n){},65:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){},71:function(t,e,n){"use strict";n.r(e);var o=n(9),c=n.n(o),a=n(14),r=n(10),i=n(0),s=n.n(i),l=n(12),u=n.n(l),d=(n(42),n(36),n(7)),b=(n(43),n(22)),p=n.n(b),j=function(){var t=Object(r.a)(c.a.mark((function t(e,n){var o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.url=window.location.href,console.log(n),t.next=4,p()({method:"post",url:"http://localhost:4000/public/dot/"+h(),data:n});case 4:return o=t.sent,t.abrupt("return",o.data);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(r.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("http://localhost:4000/public/dots/"+h());case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){return new URLSearchParams(window.location.search).get("id")},f={sendPostRequest:j,getDots:m},x=function(t){window.addEventListener("message",t,!1)},v=function(t){window.parent.postMessage(t,"*")},O=n(23),g=n(11),w=n(35),y=(n(61),n(1)),k={Amir:"https://www.nj.com/resizer/h8MrN0-Nw5dB5FOmMVGMmfVKFJo=/450x0/smart/cloudfront-us-east-1.images.arcpublishing.com/advancelocal/SJGKVE5UNVESVCW7BBOHKQCZVE.jpg",Ohad:"https://upload.wikimedia.org/wikipedia/commons/a/a0/Arh-avatar.jpg"},C=function(t){var e=t.content,n=t.author;t.color;return Object(y.jsxs)("div",{className:"comment-container",children:[Object(y.jsxs)("div",{className:"user-container",children:[Object(y.jsx)(w.a,{src:k[n]||"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png",roundedCircle:!0,width:"36px",height:"36px"}),Object(y.jsx)("span",{className:"user-name",children:n})]}),Object(y.jsxs)("div",{className:"comment-text",children:[" ",e]})]})},N=(n(65),function(t){var e=t.onSubmit,n=t.comments,o=void 0===n?[]:n,c=t.submitCallback,a=t.onSubmitReturn,r=Object(i.useState)(""),s=Object(d.a)(r,2),l=s[0],u=s[1],b=Object(i.useState)(""),p=Object(d.a)(b,2),j=p[0],m=p[1],h=Object(i.useState)(!0),f=Object(d.a)(h,2),x=f[0],v=f[1];return Object(y.jsxs)("div",{className:"dialog-box",children:[Object(y.jsx)("div",{className:"comments-container",children:o&&o.map((function(t){return Object(y.jsx)(C,{content:null===t||void 0===t?void 0:t.content,author:null===t||void 0===t?void 0:t.author,color:null===t||void 0===t?void 0:t.color})}))}),x&&!o.length?Object(y.jsxs)(g.a,{children:[Object(y.jsxs)(g.a.Group,{children:[Object(y.jsx)(g.a.Label,{children:"Name"}),Object(y.jsx)(g.a.Control,{type:"text",placeholder:"Name",onChange:function(t){return m(t.target.value)}})]}),Object(y.jsxs)(g.a.Group,{children:[Object(y.jsx)(g.a.Label,{children:"comment"}),Object(y.jsx)(g.a.Control,{as:"textarea",rows:6,onChange:function(t){u(t.target.value)}})]}),Object(y.jsx)("div",{className:"buttons-container",children:Object(y.jsx)(O.a,{variant:"outline-info",disabled:!l||!j,onClick:function(){return c([{content:l,author:j}]),void e({comment:l,author:j},a)},"data-allow":"true",children:"Submit"})})]}):Object(y.jsx)(O.a,{variant:"outline-info","data-allow":"true",onClick:function(){return v(!0)},children:"Add Commoent"})]})});n(34);var S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(e){var n=e.getCLS,o=e.getFID,c=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),o(t),c(t),a(t),r(t)}))},E=n(17),I=n(18),D=function(t){t.createADot;var e=t.handler,n=Object(i.useState)(!1),o=Object(d.a)(n,2),c=o[0],a=o[1];return Object(y.jsx)("div",{className:"widget-box",style:c?{background:"black"}:{},onClick:function(){if(c)return window.removeEventListener("click",e,!0),console.log("unbind"),void a(!1);a(!0),console.log("bind"),window.addEventListener("click",e,!0)},"data-widget":c,children:Object(y.jsx)(E.a,{height:"40px",width:"40px",icon:I.a,className:"plus-icon","data-widget":c})})},L=function(t){t.createADot,t.handler;var e=t.changeAllDotsPosition,n=Object(i.useState)("false"),o=Object(d.a)(n,2),c=o[0],a=o[1];return Object(y.jsx)("div",{className:"widget-box",onClick:function(){v("toggle"),c?e(-200,-20):e(200,20),a((function(t){return!t}))},children:Object(y.jsx)(E.a,{height:"40px",width:"40px",icon:I.b,className:"plus-icon"})})},A=function(t){var e=t.dots;return console.log("DotList",e),Object(y.jsx)("div",{children:e.map((function(t){return Object(y.jsx)("h1",{children:t.content})}))})},B=(n(69),function(t){var e=t.comments;return Object(y.jsx)("div",{className:"dialog-box",children:Object(y.jsx)("div",{className:"comments-container",children:e&&e.map((function(t){return Object(y.jsx)(C,{content:t.content,author:t.author,color:t.color})}))})})}),V=(n(70),function(t){var e=t.showBoxInit,n=t.dotId,o=(t.url,t.stickyDotInit),c=t.children,a=t.onClose,r=t.comments,l=Object(i.useState)(e),u=Object(d.a)(l,2),b=u[0],p=u[1],j=Object(i.useState)(o),m=Object(d.a)(j,2),h=m[0],f=m[1],x=Object(i.useState)(""),O=Object(d.a)(x,2),g=O[0],w=O[1],k=Object(i.useState)(r),C=Object(d.a)(k,2),N=C[0],S=C[1],E=Object(i.useState)(""),I=Object(d.a)(E,2),D=I[0],L=I[1],A=Object(i.useRef)(null);console.log("comments",r);var B=function(t){t.target.closest(".root-dot").style.zIndex=2e4},V=function(){p(!1)},M=s.a.cloneElement(c,{submitCallback:function(t){S(t),f(!0),p(!1)},onSubmitReturn:function(t){w(t._id)},comments:N});return Object(y.jsxs)("div",{className:"App",ref:A,onMouseLeave:function(t){return a(),void V()},tabindex:"0",onFocus:function(){L("focus")},children:[h?Object(y.jsx)("div",{className:"dot "+D,onMouseOver:function(t){return function(t){v({id:n}),B(t),p(!0)}(t)},tabindex:"0",id:n||g}):null,b?M:null]})}),M=!0,P=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-20,n=window.document.getElementsByClassName("root-dot"),o=0;o<n.length;o++){var c=n[o];c.style.left=Number(c.style.left.split("p")[0])+t+"px",c.style.top=Number(c.style.top.split("p")[0])+e+"px"}},R=function(){M=!0},z=function(t){if(M){var e=t.pageX,n=t.pageY,o=document.getElementsByTagName("body")[0],i=document.createElement("DIV");i.style.position="absolute",i.style.left=e+"px",i.style.top=n+"px",i.classList=["root-dot"],i.style.zIndex=1e5,o.appendChild(i),M=!1;var l=function(){var t=Object(r.a)(c.a.mark((function t(o,r){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return M=!0,t.next=3,f.sendPostRequest("",Object(a.a)({posX:e+"px",posY:n+"px"},o));case 3:i=t.sent,r(i),v("pull");case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();u.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(V,{setShouldRender:X,disableClickEvent:Y,addEventListener:J,posX:e+"px",posY:n+"px",showBoxInit:!0,stickyDotInit:!1,onClose:R,children:Object(y.jsx)(N,{disableClickEvent:Y,onSubmit:l,dotId:""})})}),i)}},F=function(){var t=Object(r.a)(c.a.mark((function t(){var e,n,o,a,r,i,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.getElementsByTagName("body")[0],(n=document.createElement("DIV")).style.position="fixed",n.style.zIndex=1e5,n.style.right=0,n.style.top="50px",e.appendChild(n),u.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(D,{createADot:z,handler:G})}),n),(o=document.createElement("DIV")).style.position="fixed",o.style.zIndex=1e5,o.style.right=0,o.style.top="150px",e.appendChild(o),u.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(L,{createADot:z,handler:G,changeAllDotsPosition:P})}),o),(a=document.createElement("DIV")).style.position="fixed",a.style.zIndex=1e5,a.style.right=0,a.style.top="50px",t.next=22,f.getDots();case 22:for(r=t.sent,u.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(A,{dots:r})}),a),i=0;i<r.length;i++)l=r[i],T(l);case 25:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(t){var e=t.posX,n=t.posY,o=t.comments,c=t._id,a=t.url,r=document.getElementsByTagName("body")[0],i=document.createElement("DIV");i.style.position="absolute",i.style.zIndex=1e5,i.style.left=e,i.style.top=n,i.classList=["root-dot"],r.appendChild(i),u.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(V,{setShouldRender:X,disableClickEvent:Y,addEventListener:J,posX:e,posY:n,showBoxInit:!1,stickyDotInit:!0,comments:o,dotId:c,url:a,onClose:R,children:Object(y.jsx)(B,{comments:o})})}),i)},X=function(t){M=t};S();var Y=function(){window.document.removeEventListener("click",G)},G=function t(e){if(!e.target.getAttribute("data-widget"))return z(e),e.target.getAttribute("data-allow")||(e.stopPropagation(),e.preventDefault()),!1;window.document.removeEventListener("click",t)},J=function(){setTimeout((function(){return window.document.addEventListener("click",z)}),200)};F();x((function(t){if("http://localhost:3000"===t.origin){var e=window.document.getElementById(t.data);e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),e.focus()}}))}},[[71,1,2]]]);
//# sourceMappingURL=main.747a2c7a.chunk.js.map